var wxJsTime=(new Date).getTime();var wxJsNonceStr=UUID.prototype.createUUID();$.ajax({type:"get",url:getContextPath()+"/weixin/jsSignature?noncestr="+wxJsNonceStr+"&timestamp="+wxJsTime,success:function(data){wx.config({debug:true,appId:appId,timestamp:wxJsTime,nonceStr:wxJsNonceStr,signature:data,jsApiList:["chooseImage","previewImage","uploadImage","downloadImage"]})}});wx.ready(function(){alert("wx API is ready!")});wx.error(function(res){alert(res)});wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(res){var localIds=res.localIds}});