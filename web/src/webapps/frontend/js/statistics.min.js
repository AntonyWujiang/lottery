jQuery(function($){$(document).ready(function(){time();getSignedAmount()});function getSignedAmount(){$.ajax({type:"post",url:getContextPath()+"/user/getUserAmount",dataType:"json",data:{},success:function(data){var amount=data.data;var totalAmount=amount.sum;var unsignedNumber=amount.sum-amount.signed;$("#signed").html(amount.signed);$("#unsigned").html(unsignedNumber);$("#sum").html(totalAmount);var pieChartCanvas=$("#pieChart").get(0).getContext("2d");var pieChart=new Chart(pieChartCanvas);var PieData=[{value:amount.signed,color:"#00a65a",highlight:"#00a65a",label:"已签到"},{value:unsignedNumber,color:"#d2d6de",highlight:"#d2d6de",label:"未签到"}];var pieOptions={segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,responsive:true,maintainAspectRatio:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};pieChart.Doughnut(PieData,pieOptions)}})}function time(){getSignedAmount();setTimeout(time,1e4)}});